<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Antidot PaF upload</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-antidot-long-200x41.png"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Antidot PaF upload </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#apu_introduction">Introduction</a></li>
<li class="level1"><a href="#apu_document">Document and Document Manager</a></li>
<li class="level1"><a href="#apu_paf_connector">PaF connector</a></li>
<li class="level1"><a href="#apu_paf_reply">PaF upload result</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="apu_introduction"></a>
Introduction</h1>
<p>This API simplify upload of one or more documents to Antidot PaF.</p>
<p>Currently, there is no API which allows to launch specific PaF. So, documents should be uploaded to a PaF configured in auto start mode.</p>
<h1><a class="anchor" id="apu_document"></a>
Document and Document Manager</h1>
<p>A document is an implementation of <em><a class="elRef" href="../javadoc/net/antidot/api/upload/DocumentInterface.html">upload::DocumentInterface</a></em>. Default implementations are available for documents built from string content or file available on the filesystem. It is the responsability of the user to set valid content to the document. If the document is initialized with a file from the filesystem, it should be still available until it has been sent correctly to the Web Service.</p>
<p>One or more documents can be added to an instance of <em><a class="elRef" href="../javadoc/net/antidot/api/upload/DocumentManager.html">upload::DocumentManager</a></em>. Using document manager is the only mean to upload more than one document at a time.</p>
<p>Example for document manager and documents of various types: </p>
<div class="fragment"><div class="line">DocumentManager mgr = <span class="keyword">new</span> DocumentManager();</div>
<div class="line"></div>
<div class="line">String content = generateXmlDocument(42);</div>
<div class="line">mgr.addDocument(<span class="keyword">new</span> TextDocument(content));</div>
<div class="line">mgr.addDocument(<span class="keyword">new</span> FileDocument(<span class="stringliteral">&#39;/path/to/specific/path/file&#39;</span>);</div>
</div><!-- fragment --><h1><a class="anchor" id="apu_paf_connector"></a>
PaF connector</h1>
<p>Instance of <em><a class="elRef" href="../javadoc/net/antidot/api/upload/Connector.html">upload::Connector</a></em> allows to configure connection to specific PaF. Once it is configured, one or more documents can be uploaded by calling appropriate method (<em><a class="elRef" href="../javadoc/net/antidot/api/upload/Connector.html#uploadDocument(net.antidot.api.upload.DocumentInterface)">upload::Connector::uploadDocument</a></em> or <em><a class="elRef" href="../javadoc/net/antidot/api/upload/Connector.html#uploadDocuments(net.antidot.api.upload.DocumentManager)">upload::Connector::uploadDocuments</a></em>).</p>
<p>Example of uploading one or more documents: </p>
<div class="fragment"><div class="line">Authentication auth = <span class="keyword">new</span> Authentication(<span class="stringliteral">&#39;antidot&#39;</span>, <span class="stringliteral">&#39;change_on_install&#39;</span>, Authorities.AFS_AUTH_ANTIDOT);</div>
<div class="line">Service service = <span class="keyword">new</span> Service(42);</div>
<div class="line">Connector connector = <span class="keyword">new</span> Connector(<span class="stringliteral">&#39;eval.partners.antidot.net&#39;</span>, service, <span class="stringliteral">&#39;TEST&#39;</span>, auth);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Upload one document directly</span></div>
<div class="line">Reply reply = connector.uploadDocument(doc);</div>
<div class="line"></div>
<div class="line"><span class="comment">// OR upload one or more documents using document manager</span></div>
<div class="line">reply = connector.uploadDocuments(docMgr);</div>
</div><!-- fragment --><h1><a class="anchor" id="apu_paf_reply"></a>
PaF upload result</h1>
<p><em><a class="elRef" href="../javadoc/net/antidot/api/upload/FileUploadException.html">upload::FileUploadException</a></em> is thrown as soon as an error occurs. So you can get advanced error informations: </p>
<div class="fragment"><div class="line">Reply reply = null;</div>
<div class="line"><span class="keywordflow">try</span> {</div>
<div class="line">  reply = connector.uploadDocument(doc);</div>
<div class="line">  System.out.println(<span class="stringliteral">&quot;Upload successful, job id: &quot;</span> + reply.getJobId());</div>
<div class="line">} <span class="keywordflow">catch</span> (FileUploadException e) {</div>
<div class="line">  System.out.println(e.getMessage() + <span class="stringliteral">&quot; - &quot;</span> + e.getErrorCode() + <span class="stringliteral">&quot; [&quot;</span> +</div>
<div class="line">                     e.getDetails() + <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 13 2013 09:36:53 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
